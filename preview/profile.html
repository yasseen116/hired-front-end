<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Hired</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
    <link rel="stylesheet" href="../static/css/style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <nav class="navbar">
        <a class="logo" href="index.html">Hired</a>

        <div class="nav-content">
            
            <ul class="nav-links">
                <li><a href="browse-jobs.html">Browse Jobs</a></li>
                <li><a href="about-us.html">About Us</a></li>
            </ul>

            <div class="search-bar">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>

                <input type="text" placeholder="Search about your Job">
            </div>

            <div class="auth-buttons">
    
                <div id="guest-view" class="auth-row">
                    <a href="login.html" class="btn btn-login">Login</a>
                    <a href="signup.html" class="btn btn-signup">Sign Up</a>
                </div>

                <div id="user-view" class="auth-row user-row" style="display: none;">
                    
                    <a href="wishlist.html" class="nav-icon-circle" title="My Wishlist">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                    </a>

                    <a href="profile.html" class="nav-profile-link" title="Go to Profile">
                        <div class="nav-icon-circle">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                        </div>
                        <span class="user-greeting">Hi, User</span>
                    </a>

                    <button onclick="logout()" class="btn btn-logout">
                        Logout
                    </button>

                </div>

            </div>

            <script>
                document.addEventListener("DOMContentLoaded", function() {
                    // 1. GET USER FROM LOCAL STORAGE
                    // Real logic: We check if there is a saved user object
                    const userJson = localStorage.getItem('user');
                    const isLoggedIn = userJson !== null; 

                    // 2. GET HTML ELEMENTS
                    const guestView = document.getElementById('guest-view');
                    const userView = document.getElementById('user-view');
                    const greeting = document.querySelector('.user-greeting');

                    // 3. TOGGLE VIEWS
                    if (isLoggedIn) {
                        // -- LOGGED IN STATE --
                        if(guestView) guestView.style.display = 'none';
                        if(userView) userView.style.display = 'flex';
                        
                        // Optional: Update the name dynamically
                        if (greeting) {
                            const user = JSON.parse(userJson);
                            greeting.textContent = "Hi, " + (user.name || "User");
                        }
                    } else {
                        // -- GUEST STATE --
                        if(guestView) guestView.style.display = 'flex';
                        if(userView) userView.style.display = 'none';
                    }
                });

                // 4. LOGOUT FUNCTION
                // You can call this function to sign out
                function logout() {
                    localStorage.removeItem('user'); // Deletes the data
                    window.location.href = 'login.html'; // Redirects to login
                }
            </script>
        </div>
    </nav>

    <div id="app">
        
<div class="page" id="app">
    <div class="container" style="margin-top: 40px; margin-bottom: 60px;">

        <div v-if="loading" class="loading-state">
            <div class="spinner-border text-primary" role="status"></div>
            <p>Loading profile...</p>
        </div>

        <div v-else class="profile-layout">

            <aside class="profile-sidebar">
                <div class="content-card user-card">
                    <div class="member-avatar">
                        <img :src="user.photo || '../static/images/img-placeholder.png'" alt="User Avatar">
                    </div>
                    <h2 class="user-name">[[ user.name ]]</h2>
                    <p class="user-title">[[ user.jobTitle ]]</p>
                    <p class="user-email">[[ user.email ]]</p>

                    <hr class="divider">

                    <div class="sidebar-stats">
                        <div class="stat">
                            <strong>[[ applications.length ]]</strong>
                            <span>Applied</span>
                        </div>
                        <div class="stat">
                            <strong>[[ user.skills.length ]]</strong>
                            <span>Skills</span>
                        </div>
                    </div>
                </div>
            </aside>

            <main class="profile-content">

                <form @submit.prevent="saveProfile" class="profile-form">

                    <div class="content-card">
                        <h3 class="card-header">Personal Information</h3>

                        <div class="form-row">
                            <div class="form-group half">
                                <label>Full Name</label>
                                <input type="text" v-model="user.name" placeholder="John Doe" required>
                            </div>
                            <div class="form-group half">
                                <label>Job Title</label>
                                <input type="text" v-model="user.jobTitle" placeholder="e.g. Software Engineer" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group half">
                                <label>Phone Number</label>
                                <input type="text" v-model="user.phone" placeholder="+20 1xx xxxx xxx">
                            </div>
                            <div class="form-group half">
                                <label>Location</label>
                                <input type="text" v-model="user.location" placeholder="Cairo, Egypt">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>About Me</label>
                            <textarea v-model="user.about" rows="4" placeholder="Briefly describe your professional background..."></textarea>
                        </div>
                    </div>

                    <div class="content-card">
                        <h3 class="card-header">Skills</h3>
                        <div class="form-group" style="position: relative;">
                            <transition-group name="skill-list" tag="div">
                                <div v-for="(skill, index) in user.skills" :key="skill.id" class="skill-row">
                                    <input type="text" v-model="skill.value" placeholder="e.g. Python" required>

                                    <button v-if="user.skills.length > 1" type="button" class="btn-icon btn-remove-skill" @click="removeSkill(index)">&times;</button>
                                    <button v-if="index === user.skills.length - 1" type="button" class="btn-icon btn-add" @click="addSkill">+</button>
                                </div>
                            </transition-group>
                            <button v-if="user.skills.length === 0" type="button" class="btn btn-card-details" @click="addSkill">Add Skill</button>
                        </div>
                    </div>

                    <div class="profile-content-card">
                        <h3 class="card-header">Work Experience</h3>
                        <div class="form-group" style="position: relative;">

                            <transition-group name="skill-list" tag="div">
                                <div v-for="(exp, index) in user.experience" :key="exp.id" class="skill-row">
                                    <input type="text" v-model="exp.role" placeholder="Role (e.g. Dev)" required>
                                    <input type="text" v-model="exp.company" placeholder="Company" required>
                                    <input type="text" v-model="exp.years" placeholder="Years (e.g. 2022)" style="max-width: 120px;" required>

                                    <button v-if="user.experience.length > 0" type="button" class="btn-icon btn-remove-skill" @click="removeExperience(index)">&times;</button>
                                    <button v-if="index === user.experience.length - 1" type="button" class="btn-icon btn-add" @click="addExperience">+</button>
                                </div>
                            </transition-group>

                            <button v-if="user.experience.length === 0" type="button" class="btn btn-card-details" @click="addExperience">
                                + Add Work Experience
                            </button>
                        </div>
                    </div>

                    <div class="profile-content-card">
                        <h3 class="card-header">Education</h3>
                        <div class="form-group" style="position: relative;">

                            <transition-group name="skill-list" tag="div">
                                <div v-for="(edu, index) in user.education" :key="edu.id" class="skill-row">
                                    <input type="text" v-model="edu.degree" placeholder="Degree" required>
                                    <input type="text" v-model="edu.university" placeholder="University" required>
                                    <input type="text" v-model="edu.year" placeholder="Year" style="max-width: 120px;" required>

                                    <button v-if="user.education.length > 0" type="button" class="btn-icon btn-remove-skill" @click="removeEducation(index)">&times;</button>
                                    <button v-if="index === user.education.length - 1" type="button" class="btn-icon btn-add" @click="addEducation">+</button>
                                </div>
                            </transition-group>

                            <button v-if="user.education.length === 0" type="button" class="btn btn-card-details" @click="addEducation">
                                + Add Education
                            </button>
                        </div>
                    </div>

                    <div class="profile-content-card">
                        <h3 class="card-header">Resume / CV</h3>

                        <div v-if="user.cvName" class="cv-preview-box">
                            <div class="cv-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                            </div>
                            <div class="cv-info">
                                <span class="cv-name">[[ user.cvName ]]</span>
                                <span class="cv-label">Current Resume</span>
                            </div>
                            <div class="cv-actions">
                                <label for="replaceCv" style="cursor: pointer; margin-right: 10px; color: #0a66c2; font-weight: 600; padding-top: 6px;">Replace</label>
                                <input type="file" id="replaceCv" @change="handleFileUpload" style="display: none;" accept=".pdf,.doc,.docx">

                                <button type="button" class="btn-icon btn-preview" style="width: 35px; height: 35px; margin-right: 5px;" @click="previewCv" title="Preview Resume">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>

                                <button type="button" class="btn-icon btn-remove-skill" style="width: 35px; height: 35px;" @click="removeCv" title="Remove Resume">&times;</button>
                            </div>
                        </div>

                        <div v-else class="form-group">
                            <input type="file" id="cv" @change="handleFileUpload" accept=".pdf,.doc,.docx" style="display: none;">
                            <label for="cv" class="custom-file-upload">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                                <span>Upload your Resume</span>
                            </label>
                        </div>
                    </div>

                    <div style="text-align: right; margin-bottom: 40px;">
                        <button type="submit" class="btn btn-apply-large" :disabled="isSaving">
                            [[ isSaving ? 'Saving Changes...' : 'Save Profile' ]]
                        </button>
                    </div>

                </form>

                <div class="profile-content-card">
                    <h3 class="card-header">Applied Jobs</h3>

                    <div v-if="applications.length === 0" style="color: #666; font-style: italic; padding: 10px;">
                        You haven't applied to any jobs yet.
                    </div>

                    <div v-else class="applications-list">
                        <div class="app-item" v-for="app in applications" :key="app.id">
                            <div class="app-info">
                                <h4 class="app-job-title">[[ app.jobTitle ]]</h4>
                                <span class="app-date">Applied on: [[ app.appliedAt ]]</span>
                            </div>
                            <div class="app-status">
                                <span class="status-badge" :class="getStatusClass(app.status)">
                                    [[ app.status ]]
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>
</div>

    </div>

    <footer class="site-footer">
        <div class="container footer-layout">

            <div class="footer-info">
                <h2 class="logo footer-logo">Hired</h2>
                <p class="footer-desc">
                    Hired is a reliable job-seeking platform that connects skilled individuals with real career opportunities. 
                    We help candidates explore jobs, apply smoothly, and track progress—making career growth easier, 
                    faster, and more confident for graduates and professionals alike.
                </p>
            </div>
            <div class="footer-socials">
                <h3>Follow us!</h3>
                <div class="social-icons">
                    <a href="https://facebook.com" class="icon-btn fb">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                    </a>
                    
                    <a href="https://linkedin.com" class="icon-btn in">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                    </a>

                    <a href="https://instagram.com" class="icon-btn ig">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                    </a>
                    
                    <a href="https://wa.me/+201098977143" class="icon-btn wa">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487 1.093.472 1.527.494 2.071.393.596-.11 1.758-.718 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
                    </a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 Hired</p>
            <p>• All Rights Reserved • Designed by SE3</p>
        </div>
    </footer>
    
<script src="../static/js/model.js"></script>
<script src="../static/js/profile.js"></script>

</body>
</html>